pipeline {
  agent any

  stages {
    {{#githubUrl}}
    stage('Git clone') {
      steps {
        git branch: '{{branch}}', url: '{{githubUrl}}'
      }
    }
    {{/githubUrl}}
    {{#isBuildSelected}}
    stage('Build') {
      steps {
        dir('{{#directory}}{{directory}}{{/directory}}{{^directory}}.{{/directory}}') {
          {{#gradle}}
          sh 'chmod +x gradlew'
          sh './gradlew clean build -x test'
          {{/gradle}}
          {{#maven}}
          sh 'chmod +x mvn'
          sh 'mvn clean install'
          {{/maven}}
          {{#maven_wrapper}}
          sh 'chmod +x mvnw'
          sh './mvnw clean install'
          {{/maven_wrapper}}
          {{#npm}}
          sh 'npm ci'
          sh 'npm run build'
          {{/npm}}
         }
       }
     }
    {{/isBuildSelected}}
    {{#isTestSelected}}
    stage('Test') {
      steps {
        dir('{{#directory}}{{directory}}{{/directory}}{{^directory}}.{{/directory}}') {
          {{#gradle}}
          sh './gradlew test'
          {{/gradle}}
          {{#maven}}
          sh 'mvn test'
          {{/maven}}
          {{#maven_wrapper}}
          sh './mvnw test'
          {{/maven_wrapper}}
          {{#npm}}
          {{/npm}}
        }
      }
    }
    {{/isTestSelected}}
  }
  // íŒŒì´í”„ë¼ì¸ ì „ì²´ì˜ ì„±ê³µ/ì‹¤íŒ¨ í›„ ì²˜ë¦¬ ì •ì˜
  post {
    success {
      echo 'ğŸ‰ ë¹Œë“œê°€ ì„±ê³µí–ˆìŠµë‹ˆë‹¤!'
    }
    failure {
      echo 'âŒ ë¹Œë“œê°€ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤!'
    }
  }
}
